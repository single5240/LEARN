### 可能遇到的问题
1. 首选需要初步理解TwinCAT使用的XML的作用，此XML是对设备的描述，类似于GSD文件。描述了通信时需要使用的对象字典，数据类型，长度等等。xml文件一般都有好几兆大小，但TwinCAT只会解析XML并将其中一部分特征数据烧录进LAN9252挂载的EEPROM中去，一般选择512KB的快速EEPROM（24FC512）。
2. 根据自己的项目要求，设计XML，这个工作可以通过EtherCAT的开发工具SSC来简单实现
3. SSC在生成XML的同时，还可以生成代码，这份代码是没法直接用的，但里面有关字典的.c文件非常有价值，可以参考并移植到开发板的代码中去，完成自己的逻辑。
### 分析协议代码
#### 主要函数
~~~c
HW_Init();
MainInit();
while (1){
    MainLoop();
}
~~~
##### `HW_Init()` --- 主要需要修改的函数
1. I/O 初始化（非必要）
2. SPI 初始化（因选用spi作为与ESC的通信方式，必要）
3. ADC初始化（非必要）
4. 通过SPI读写ESC寄存器（功能暂时未知）
5. EtherCAT主中断响应配置和使能，需要配置到外部中断中，下降沿触发
6. 分布式时钟同步信号0配置和使能，需要配置到外部中断中，下降沿触发
7. 分布式时钟同步信号1配置和使能，需要配置到外部中断中，下降沿触发
8. 1ms定时器溢出中断配置和使能
9. 启动所用中断
##### `MainInit()`
1. ethercat从站初始化
2. coe对象初始化

##### `MainLoop()`
1. 从站主循环
2. **`ECAT_Application()`** --- 需要实现I/O映射，包裹数字、模拟
	- 此函数将从同步中断服务程序（ISR）中被调用，或者如果不支持同步，则从主循环中被调用。

### 硬件接口移植
#### 外部中断及定时器中断
1. 主要修改HW文件中的对用宏定义
2. 定时器需要注意模板中对中断函数的支持
	- 如果模板中不支持中断函数，会使用轮询定时器计数值的方法（注意修改相关函数和宏定义）
3. 