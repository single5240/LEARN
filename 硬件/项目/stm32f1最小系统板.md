### 原理图

#### 电源电路
1.  **VDD输入范围和稳压**：
	- IC可以接受2.0V至3.6V的输入电压范围（通常连到VDD），并且内部有一个稳压器，将这个输入稳定到1.8V，用作IC内部的数字电路供电。
2. **实时时钟和备份域寄存器（RTC）电源**：
	- IC的RTC和备份寄存器由VBAT供电，允许这些功能在主电源VDD关闭时继续运作。如果有外部电源连到VBAT，则使用外部电源供电；如果没有外部电源提供，则建议将VDD直接连接到VBAT引脚。
3. **模拟数字转换器（ADC）供电**：
	- ADC分别有自己的独立供电输入引脚VDDA，可以直接从外部供电，这有助于在ADC运作时最大限度地减少数字电路的干扰。
4. **模拟接地**：
	- ADC也有独立的接地引脚VSSA，用于提供一个单独的地平面，这有助于在模拟信号处理时减少噪声和干扰。
5. **模拟参考电压**：
	- VREF+和VREF-用作ADC测量时的参考电压。在拥有较少引脚数（如64-pin或以下）的IC上，这些引脚可能未被使能，并默认连接到内部的VDDA和VSSA；而在引脚数更多的IC上（如100-pin或144-pin），VREF+/-可以由外部稳压源供电，这常用于提升ADC性能，确保更精确的模拟信号测量。
##### 设计细节
1. 当使用ADC时，VDD的输入电压范围应在2.4V到3.6V之间。不使用ADC时，输入电压范围可以是2.0V到3.6V。
2. VDD电源输入必须通过去耦电容组合后才能输入到IC。去耦电容组合包括N个100nF陶瓷电容（数量取决于VDD输入的个数）和至少1个4.7uF的钽电容/陶瓷电容（推荐10uF）。
3. VBAT引脚可以直接连接外部电池供电。电池电压范围为1.8V到3.6V。如果不使用外部电池，VDD可以通过一个100nF去耦电容后连接到VBAT引脚。
4. VDDA电源输入必须通过两个去耦电容连接，这两个电容为100nF的陶瓷电容和1uF的钽电容或陶瓷电容。
5. VREF+引脚可以连接到外部电源VDDA，如果VREF+连接到外部独立电源，那么需要连接一个100nF和1uF的电容。VREF+的电压应该保持在2.4V到VDDA之间。
6. 模拟噪声过滤的措施包括：VDDA通过一个磁珠来过滤高频噪声后作为输入；VREF+可通过一个典型值为47Ω的电阻连接到VDDA。
##### 原理图
![[Pasted image 20240629180811.png]]
#### 时钟设计
1. Crystal/Ceramic Resonator
~~~
1. 频率范围：
	F101xx->F103xx：f∈[4, 16];
	f100xx：f∈[4, 24];
	F105xx/F107xx：f∈[3, 25];
2. PCB设计：
	a. 晶振和电容PCB布线时尽可能地靠近OSC引脚；
	b. CL1和CL2的容值通常相同，官方建议容值范围在[5pF, 25pF]；
	c. CL = CL1 x CL2 / (CL1 + CL2) + Cstray，其中：
	Cstray：pin、板卡、PCB布线的typ[2pF, 7pF]，选型计算时，可以粗略认为Cstray为10pF；
	CL1和CL2：查看晶振规格书给出的CL，带入公式计算得出；
~~~
