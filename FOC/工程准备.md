# 方波控制
## tips
- 乘除可采用位运算，减少计算量
## PWM
1. 一般采用中心对齐
2. *一定要加上死区*
## ADC采样
1. PWM触发ADC结束采样，并开始转换
2. adc采样采用均值滤波
3. [【STM32】ADC的基本原理、寄存器（超基础、详细版）-CSDN博客](https://blog.csdn.net/qq_38410730/article/details/80071349)
4. 
## 错误处理（欠压和过压）
1. 获取电压（由adc采样获得），再判断欠压和过压
2. 所有错误处理后，再依据对应标志位统一处理

## 交互（按键和LED）
1. 不实时改变led状态，而是通过led状态标志位稳定周期处理
2. 按键采用任务周期扫描、外部中断、定时器中断扫描

## 电机控制
1. 充电？
2. 获取霍尔传感器信息
3. pwm输出处理---6步换相
	- 本质是改变6个MOS管的状态
	- *一定要检查开关逻辑，防止炸鸡*
1. 电机启动

## 读取霍尔传感数据
1. 滤波：每隔1us读一次，读三次一样即可用数据
2. 读取霍尔数据后，执行换相函数

# SPWM
1. 原理：载波+调制波 
2. 正弦表(0-90°) --- 映射到整数运算

# 霍尔信号与转子方向角度
1. 